function initCarouselImages() { var t = 4; ThumbImages = 6, ThumbImages > t ? ($("#ImageScrollPrev").show(), $("#ImageScrollNext").show(), $("#ProductDetail .ImageCarouselBox").css("padding-left", Math.floor(($("#ProductDetail .ProductThumb").width() - 35 * t - 60) / 2))) : (t = ThumbImages, $("#ProductDetail .ImageCarouselBox").css("padding-left", Math.floor(($("#ProductDetail .ProductThumb").width() - 35 * t) / 2))), $(".carousel").jCarouselLite({ btnNext: ".next", btnPrev: ".prev", visible: t, scroll: 1, circular: !1, speed: 200 }) } function initZoomImages() { var t = { zoomWidth: 350, zoomHeight: 300, xOffset: 0, position: "right", preloadImages: !1, showPreload: !1, title: !1, imageOpacity: .5, preloadImages: !1, showPreload: !1, cursor: "pointer" }; $(".jqzoom").jqzoom(t) } function playVideo(t) { $("#youTubeCurrentVideos li").each(function () { $(this).attr("id"); $(this).removeClass("selectedVideo"), $(this).addClass("unselectedVideo") }), $("#youTubeCurrentVideos li#" + t).addClass("selectedVideo"); var e = '<object width="535" height="425"><param value="http://www.youtube.com/v/' + t + '?fs=1" name="movie" /><param value="true" name="allowFullScreen" /><param value="always" name="allowscriptaccess" /><embed width="535" height="425" allowfullscreen="true" allowscriptaccess="always" type="application/x-shockwave-flash" src="http://www.youtube.com/v/' + t + '?&fs=1&autoplay=1" /></object>'; return $("#youtubeLeftBox").html(e), !1 } var wpComment = { _companyId: 0, _productId: 0, Configs: { HANDLER_CALLBACK_COMMENT_URL: "/Modules/PriceComparison/Handler/CommentProduct.ashx" }, Utils: { token: "", t: null, captcha: function (t) { var e = document.getElementById("captcha_" + t); wpComment.Utils.token = t, e.src = "/ramdomimage.ashx?token=" + t }, refreshImg: function (t) { wpComment.Utils.t && clearTimeout(wpComment.Utils.t), wpComment.Utils.t = setTimeout(new Function("wpComment.Utils.changeImg('" + t + "');"), 50) }, changeImg: function (t) { var e = new Date, a = e.getTime(); $(t).attr("src", "/ramdomimage.ashx?token=" + wpComment.Utils.token + "&t=" + a) }, IsValidEmail: function (t) { var e = /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.([a-z]){2,4})$/; return e.test(t) } }, autosize: function () { $(".txt_textbox").autosize() }, addHtml: function (t) { $("#comment_" + t).html('<div class="form-comment reply-comment"><a class="close-cmt" onclick="wpComment.removeHtml(' + t + ')" href="javascript:;">close</a><h4>Trả lời</h4><ul class="clearfix"><li class="clearfix"><p class="reset"><label><input type="text" value="Họ tên" onfocus="if (this.value==\'Họ tên\') this.value=\'\';" onblur="if (this.value==\'\') this.value=\'Họ tên\';" id="txtFullName' + t + '" /></label></p><p class="reset"><label><input type="text" value="Email" onfocus="if (this.value==\'Email\') this.value=\'\';" onblur="if (this.value==\'\') this.value=\'Email\';" id="txtEmail' + t + '" /></label></p> <p class="clearfix reset capchart"><input type="text" class="fl" id="txtcaptcha' + t + '" /><img class="fl img-cc" alt="capchart" id="captcha_' + t + '"><a class="refresh fl" href="javascript:;" id="reset_captcha_' + t + '" onclick="wpComment.Utils.changeImg(captcha_' + t + ')"><img alt="refresh" src="/Images/refesh.png"></a></p></li><li class="clearfix"><textarea id="txtContent' + t + '" onfocus="if (this.value==\'Ý kiến của bạn...\') this.value=\'\';" onblur="if (this.value==\'\') this.value=\'Ý kiến của bạn...\';" value="Ý kiến của bạn...">Ý kiến của bạn...</textarea></li><li class="clearfix text-right last"><a class="send-comment" href="javascript:;" onclick="wpComment.addComment(' + t + ')">Gửi bình luận</a></li></ul>'), wpComment.Utils.captcha(t, "captcha_" + t), wpComment.removeComment(t) }, checkComment: function () { var t = $("#txtComTitle").val(), e = $("#txtComFullName").val(), a = $("#txtComEmail").val(), n = $("#txtComContent").val(), o = $("input[name='score']").val(), l = $("#txtCaptcha").val(), i = wpComment.Utils.IsValidEmail(a); return null == t || "" == t || "Tiêu đề" == t ? (jError("Bạn phải nhập tiêu đề cho bình luận !!!"), !1) : null == e || "" == e || "Họ tên" == e ? (jError("Bạn phải nhập họ tên cho bình luận !!!"), !1) : null == a || "" == a || "Email" == a ? (jError("Bạn phải nhập email cho bình luận !!!"), !1) : 0 == i ? (jError("Địa chỉ email không hợp lệ !!!"), !1) : null == n || "" == n || "Viết ý kiến của bạn..." == n ? (jError("Bạn phải nhập nội dung cho bình luận !!!"), !1) : null == l || "" == l ? (jError("Bạn phải mã bảo mật !!!"), !1) : void $.ajax({ type: "POST", url: wpComment.Configs.HANDLER_CALLBACK_COMMENT_URL, data: { method: "Comment", args: { email: a, name: e, content: n, companyId: wpComment._companyId, productId: wpComment._productId, title: t, rate: o, captcha: l } }, success: function (t) { var e = $.parseJSON(t); switch (e.status) { case "success": wpComment.clearComment(), jSuccess("Đăng bình luận thành công! Bình luận sẽ được hiển thị sau khi quản trị kiểm duyệt nội dung.!"); break; case "error": jError(e.message + e.data); break; case "fail": jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!"); break; default: jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!") } }, error: function () { jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!") } }) }, clearComment: function () { document.getElementById("txtComTitle").value = "", document.getElementById("txtComFullName").value = "", document.getElementById("txtComEmail").value = "", document.getElementById("txtComContent").value = "", document.getElementById("txtCaptcha").value = "" }, removeHtml: function (t) { $("#comment_" + t).html(""), wpComment.removeComment(t), $("#reply_" + t).html("<a id='" + t + "' class=\"subright\" onclick='wpComment.addHtml(" + t + ")'>Trả lời</a>") }, removeComment: function (t) { $("#div_fix input.check_data").each(function () { $(this).val() != t ? ($("#comment_" + $(this).val()).html(""), dHtml = $("#reply_" + $(this).val()).html(), 0 == dHtml.length && $("#reply_" + $(this).val()).html("<a id='" + $(this).val() + "' class=\"subright\" onclick='wpComment.addHtml(" + $(this).val() + ")'>Trả lời</a>")) : $("#reply_" + $(this).val()).html("") }) }, addComment: function (t) { var e = $("#txtEmail" + t), a = $("#txtcaptcha" + t), n = $("#txtFullName" + t), o = $("#txtContent" + t); if (null == n.val() || "" == n.val() || "Họ tên" == n.val()) return jError("Bạn chưa nhập họ và tên !"), void n.focus(); if (null == e.val() || "" == e.val() || "Email" == e.val()) return jError("Địa chưa nhập đia chỉ email!"), void e.focus(); var l = wpComment.Utils.IsValidEmail(e.val()); return 0 == l ? (jError("Địa chỉ email không hợp lệ!"), e.focus(), !1) : null == o.val() || "" == o.val() || "Ý kiến của bạn..." == o.val() ? (jError("Bạn chưa nhập nội dung cho bình luận!"), void o.focus()) : "" == a.val() ? (jError("Bạn chưa nhập captcha cho comment!"), void a.focus()) : void $.ajax({ type: "POST", url: wpComment.Configs.HANDLER_CALLBACK_COMMENT_URL, data: { method: "AddComment", args: { email: e.val(), name: n.val(), content: o.val(), companyId: wpComment._companyId, productId: wpComment._productId, commentId: t, captcha: a.val() } }, success: function (a) { var n = $.parseJSON(a); switch (n.status) { case "success": jSuccess("Đăng bình luận thành công! Bình luận sẽ được hiển thị sau khi quản trị kiểm duyệt nội dung.!"), wpComment.removeHtml(t); break; case "error": jError(n.message + n.data), e.focus(); break; case "fail": jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!"), e.focus(); break; default: jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!"), e.focus() } }, error: function () { jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!"), e.focus() } }) }, commentRankedController: { _maxPage: 0, _currentPage: 0, selectors: { CONTROL_NEXT: "#comment-next", LOADING: "#loading_comment", ITEM_RANK_CONTENT: "#div_fix" }, renderRankContent: function (t) { var e = this; $.ajax({ type: "POST", data: { method: "LoadComment", args: { companyId: wpComment._companyId, productId: wpComment._productId, currentPage: t } }, url: wpComment.Configs.HANDLER_CALLBACK_COMMENT_URL, beforeSend: function () { $(e.selectors.LOADING).html('<div style="padding:10px 0 10px 0;text-align:center;"><img src="/images/loader_ge.gif" alt="Loading..." /><div>') }, success: function (a) { var n = $.parseJSON(a); switch (n.status) { case "success": var o = $.parseJSON(n.data); o.content ? ($(e.selectors.ITEM_RANK_CONTENT).append(o.content).animate({ opacity: 1 }, 1500), $(e.selectors.LOADING).html("")) : ($(e.selectors.LOADING).html('<p class="text-center"><b>Không tìm thấy comment nào!</b></p>'), e.showHideControl(t, 0)); break; case "error": jError(res.message + res.data); break; case "fail": jError("Hệ thống đang quá tải, bạn vui lòng quay lại sau!") } }, error: function (t, e) { alert(e) } }) }, init: function (t) { var e = this; e._maxPage = t; var a = 0; e.showHideControl(a, t), $(this.selectors.CONTROL_NEXT).click(function () { var t = $(this); return a < e._maxPage - 1 && (a++, $(e.selectors.CONTROL_PREV).show()), e.renderRankContent(a), a == e._maxPage - 1 && $(t).hide().fadeOut(), !1 }) }, showHideControl: function (t, e) { var a = this; $(a.selectors.CONTROL_NEXT).show().fadeIn(), (t == e - 1 || 0 == e) && $(a.selectors.CONTROL_NEXT).hide().fadeOut() } }, init: function (t, e, a) { wpComment._companyId = t, wpComment._productId = e, wpComment.commentRankedController.init(a) } }; $(document).ready(function () { hs.graphicsDir = "/Modules/PriceComparison/bundles/estore/ProductDetail/highslide/graphics/", hs.align = "center", hs.transitions = ["expand", "crossfade"], hs.outlineType = "rounded-white", hs.fadeInOut = !0, hs.numberPosition = "caption", hs.dimmingOpacity = .75, hs.addSlideshow && hs.addSlideshow({ interval: 5e3, repeat: !1, useControls: !0, fixedControls: "fit", overlayOptions: { opacity: .75, position: "bottom center", hideOnMouseOut: !0 } }), $(".tab-content").hide(), $("ul.tabs li:first a").addClass("active").show(), $(".tab-content:first").show(), $("ul.tabs li a").click(function () { $("ul.tabs li a").removeClass("active"), $(this).addClass("active"), $(".tab-content").hide(); var t = $(this).attr("href"); return $(t).fadeIn(), !1 }), $("#resetCaptcha").click(function () { var t = document.getElementById("imgCaptcha"); t.src = "/ramdomimage.ashx?c=" + Math.random() }) });